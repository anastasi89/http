(()=>{"use strict";class e{constructor(e,t){this.container=document.querySelector(".container"),this.id=null,this.card=null,this.cardText=e,this.cardDescription=t,this.btn=null,this.idReserv=[]}cardMaP(e,t,n){return this.id=e,`<div class="card_content data-id_${e}">\n    <button class="card_not_done"></button>\n    <button class="card_done hidden">\t&#10004;</button>\n    <div class="card_input">\n      <div class="card_text">${t}</div>\n      <div class="card_description hidden">${n}</div>\n    </div>\n    <button class="card_edit">&#9998;</button>\n    <button class="card_delete">&#10006;</button>\n  </div>`}createCard(){const e=this.container.querySelector(".cards");this.id=this.generateId(),e.insertAdjacentHTML("beforeend",this.cardMaP(this.id,this.cardText,this.cardDescription)),this.card=e.querySelector(`.data-id_${this.id}`)}generateId(){const e=Math.floor(1e6*Math.random());return this.idReserv.includes(e)?this.generateId():(this.idReserv.push(e),e)}}(new class{constructor(){this.container=null,this.actualElement=null,this.btnCardDelete=this.btnCardDelete.bind(this),this.btnCardEdit=this.btnCardEdit.bind(this),this.btnCardNotDone=this.btnCardNotDone.bind(this),this.btnCardDone=this.btnCardDone.bind(this),this.addNewCard=this.addNewCard.bind(this),this.addCard=this.addCard.bind(this),this.cansel=this.cansel.bind(this),this.canselEdit=this.canselEdit.bind(this),this.canselDel=this.canselDel.bind(this),this.btnText=this.btnText.bind(this),this.cardDelete=this.cardDelete.bind(this),this.cardEdit=this.cardEdit.bind(this)}bindToDOM(e){this.container=e,this.container.querySelector(".card_add").addEventListener("mousedown",(e=>{e.preventDefault(),this.addNewCard()}))}addNewCard(){const e=this.container.querySelector(".popover"),t=this.container.querySelector(".container_add_tiket");t.classList.remove("hidden"),e.classList.remove("hidden");const n=t.querySelector(".popover_control_ok"),r=t.querySelector(".popover_control_cancel");n.addEventListener("mousedown",(e=>{e.preventDefault(),this.addCard(t),this.cansel(t)})),r.addEventListener("mousedown",(e=>{e.preventDefault(),this.cansel(t)}))}addCard(t){const n=t.querySelector(".tiket_text").value,r=t.querySelector(".tiket_description").value;if(""===n)return void this.cansel(t);const d=new e(n,r);d.createCard();const{card:o}=d,s=o.querySelector(".card_delete"),i=o.querySelector(".card_edit"),a=o.querySelector(".card_not_done"),c=o.querySelector(".card_done"),l=o.querySelector(".card_text");s.addEventListener("mousedown",(e=>{e.preventDefault(),this.btnCardDelete(o)})),i.addEventListener("mousedown",(e=>{e.preventDefault(),this.btnCardEdit(o)})),a.addEventListener("mousedown",(e=>{e.preventDefault(),this.btnCardNotDone(o)})),c.addEventListener("mousedown",(e=>{e.preventDefault(),this.btnCardDone(o)})),l.addEventListener("mousedown",(e=>{e.preventDefault(),this.btnText(o)}))}btnCardDelete(e){const t=this.container.querySelector(".popover"),n=this.container.querySelector(".container_delete_tiket");n.classList.remove("hidden"),t.classList.remove("hidden");const r=n.querySelector(".popover_control_ok"),d=n.querySelector(".popover_control_cancel");r.addEventListener("mousedown",(t=>{t.preventDefault(),this.cardDelete(e),this.canselDel(n,e)})),d.addEventListener("mousedown",(t=>{t.preventDefault(),this.canselDel(n,e)}))}cardDelete(e){const t=e.querySelector(".card_delete"),n=e.querySelector(".card_edit"),r=e.querySelector(".card_not_done"),d=e.querySelector(".card_done"),o=e.querySelector(".card_text");t.removeEventListener("mousedown",(t=>{t.preventDefault(),this.btnCardDelete(e)})),n.removeEventListener("mousedown",(t=>{t.preventDefault(),this.btnCardEdit(e)})),r.removeEventListener("mousedown",(t=>{t.preventDefault(),this.btnCardNotDone(e)})),d.removeEventListener("mousedown",(t=>{t.preventDefault(),this.btnCardDone(e)})),o.removeEventListener("mousedown",(t=>{t.preventDefault(),this.btnText(e)})),e.remove()}btnCardNotDone(e){this.actualElement=e;e.querySelector(".card_not_done").classList.add("hidden");e.querySelector(".card_done").classList.remove("hidden")}btnCardDone(e){this.actualElement=e;e.querySelector(".card_not_done").classList.remove("hidden");e.querySelector(".card_done").classList.add("hidden")}btnText(e){this.actualElement=e;const t=e.querySelector(".card_description");t.classList.contains("hidden")?t.classList.remove("hidden"):t.classList.add("hidden")}btnCardEdit(e){const t=this.container.querySelector(".popover"),n=this.container.querySelector(".container_edit_tiket");n.classList.remove("hidden"),t.classList.remove("hidden"),n.querySelector(".tiket_text").value=e.querySelector(".card_text").textContent,n.querySelector(".tiket_description").value=e.querySelector(".card_description").textContent;const r=n.querySelector(".popover_control_ok"),d=n.querySelector(".popover_control_cancel");r.addEventListener("mousedown",(t=>{t.preventDefault(),this.cardEdit(e,n),this.canselEdit(n,e)})),d.addEventListener("mousedown",(t=>{t.preventDefault(),this.canselEdit(n,e)}))}cardEdit(e,t){this.cardDelete(e),this.addCard(t)}canselEdit(e,t){e.classList.add("hidden");this.container.querySelector(".popover").classList.add("hidden");const n=this.container.querySelector(".container_edit_tiket");n.querySelector(".tiket_text").value="",n.querySelector(".tiket_description").value="";const r=n.querySelector(".popover_control_ok"),d=n.querySelector(".popover_control_cancel");r.removeEventListener("mousedown",(e=>{e.preventDefault(),this.cardEdit(t,n),this.canselEdit(n,t)})),d.removeEventListener("mousedown",(e=>{e.preventDefault(),this.canselEdit(n,t)}))}cansel(e){e.classList.add("hidden");this.container.querySelector(".popover").classList.add("hidden");const t=this.container.querySelector(".container_add_tiket");t.querySelector(".tiket_text").value="",t.querySelector(".tiket_description").value="";const n=t.querySelector(".popover_control_ok"),r=t.querySelector(".popover_control_cancel");n.removeEventListener("mousedown",(e=>{e.preventDefault(),this.addCard(t),this.cansel(t)})),r.removeEventListener("mousedown",(e=>{e.preventDefault(),this.cansel(t)}))}canselDel(e,t){e.classList.add("hidden");this.container.querySelector(".popover").classList.add("hidden");const n=this.container.querySelector(".container_delete_tiket"),r=n.querySelector(".popover_control_ok"),d=n.querySelector(".popover_control_cancel");r.removeEventListener("mousedown",(e=>{e.preventDefault(),this.cardDelete(t),this.canselDel(n,t)})),d.removeEventListener("mousedown",(e=>{e.preventDefault(),this.canselDel(n,t)}))}}).bindToDOM(document.querySelector(".container"))})();